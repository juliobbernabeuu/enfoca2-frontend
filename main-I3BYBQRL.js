import{a as J}from"./chunk-LH4K7IS7.js";import{A as m,B as de,C as l,D as R,E as M,F as b,G as x,H as v,I as we,J as ye,K as me,L as pe,M as ue,N as Ee,O as Se,P as I,Q as P,R as Me,S as Fe,T as ke,U as S,V as Ie,W as Te,X as Ve,Y as T,Z as He,_ as De,a as he,aa as Oe,b as A,ba as Pe,c as be,ca as B,d as xe,da as Le,e as ve,ea as je,f as O,fa as L,ga as V,h as W,ha as Ae,i as Ce,ia as Ne,j as p,ja as H,k as u,ka as Re,l as N,la as U,m as s,ma as z,n as E,na as G,o as w,oa as q,pa as We,q as _,qa as Be,r as d,ra as F,s as le,t as o,u as a,v as C,w as se,x as ce,y,z as g}from"./chunk-Y2HWLAXH.js";function Je(i,t){if(i&1&&C(0,"img",33),i&2){let e=t.$implicit,n=m(2);d("src",n.backendBaseUrl+e.url,N)("alt",e.titulo)}}function Ke(i,t){if(i&1&&(o(0,"div",30)(1,"div",31),_(2,Je,1,2,"img",32),a()()),i&2){let e=t.$implicit,n=t.index;le("active",n===0),s(2),d("ngForOf",e)}}function Ze(i,t){if(i&1&&C(0,"img",33),i&2){let e=t.$implicit,n=m(2);d("src",n.backendBaseUrl+e.url,N)("alt",e.titulo)}}function Qe(i,t){if(i&1&&(o(0,"div",30)(1,"div",31),_(2,Ze,1,2,"img",32),a()()),i&2){let e=t.$implicit,n=t.index;le("active",n===0),s(2),d("ngForOf",e)}}var K=class i{constructor(t){this.fotoService=t}backendBaseUrl="https://enfoca2-backend.onrender.com";fotosRecientes=[];fotosValoradas=[];fotosRecientesPorGrupo=[];fotosValoradasPorGrupo=[];subirArriba(){window.scrollTo({top:0,behavior:"smooth"})}ngOnInit(){this.fotoService.obtenerTodas().subscribe(t=>{this.fotosRecientes=t.sort((e,n)=>new Date(n.fecha).getTime()-new Date(e.fecha).getTime()).slice(0,12),this.fotosRecientesPorGrupo=this.dividirEnGrupos(this.fotosRecientes,4)}),this.fotoService.obtenerValoradas().subscribe(t=>{this.fotosValoradas=t.slice(0,12),this.fotosValoradasPorGrupo=this.dividirEnGrupos(this.fotosValoradas,4)})}dividirEnGrupos(t,e){let n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}static \u0275fac=function(e){return new(e||i)(E(J))};static \u0275cmp=w({type:i,selectors:[["app-home"]],decls:51,vars:2,consts:[[1,"position-relative","text-white"],["src","fondo.jpg","alt","Fondo",1,"w-100",2,"height","680px","object-fit","cover","filter","brightness(0.5)"],[1,"position-absolute","top-50","start-50","translate-middle","text-center","px-3"],["data-traducir","",1,"display-2","fw-bold"],["data-no-traducir","",1,"text-info"],["data-traducir","",1,"lead","mt-3"],["href","#descubrir-mas","data-traducir","",1,"btn","btn-outline-light","btn-lg","mt-4","rounded-pill","px-4"],["id","descubrir-mas",1,"py-5","bg-dark","text-light"],[1,"container","text-center"],["data-traducir","",1,"mb-4","fw-semibold"],["data-traducir","",1,"fs-5","mb-3"],["data-traducir","",1,"mb-4"],["href","#carrusel-recientes","data-traducir","",1,"btn","btn-light","btn-lg","rounded-pill","px-4"],["id","carrusel-recientes",1,"py-5","bg-white"],[1,"container"],["data-traducir","",1,"text-center","mb-5"],["id","carouselRecientes","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselRecientes","data-bs-slide","prev",1,"carousel-control-prev"],[1,"carousel-control-prev-icon"],["type","button","data-bs-target","#carouselRecientes","data-bs-slide","next",1,"carousel-control-next"],[1,"carousel-control-next-icon"],[1,"py-5","bg-dark","text-light"],["id","carouselValoradas","data-bs-ride","carousel",1,"carousel","slide"],["type","button","data-bs-target","#carouselValoradas","data-bs-slide","prev",1,"carousel-control-prev"],["type","button","data-bs-target","#carouselValoradas","data-bs-slide","next",1,"carousel-control-next"],[1,"py-5","bg-white","text-center"],["data-traducir","",1,"fw-bold","mb-3"],["data-traducir","",1,"btn","btn-outline-dark","btn-lg","rounded-pill","px-4","me-3",3,"click"],[1,"carousel-item"],[1,"d-flex","justify-content-center","flex-wrap","gap-4"],["class","rounded shadow-sm","style","width: 300px; height: 200px; object-fit: cover;",3,"src","alt",4,"ngFor","ngForOf"],[1,"rounded","shadow-sm",2,"width","300px","height","200px","object-fit","cover",3,"src","alt"]],template:function(e,n){e&1&&(o(0,"div",0),C(1,"img",1),o(2,"div",2)(3,"h1",3),l(4,"Bienvenido a "),o(5,"span",4),l(6,"Enfoca2"),a()(),o(7,"p",5),l(8,"Captura, comparte y descubre las mejores fotograf\xEDas."),a(),o(9,"a",6),l(10,"Explorar"),a()()(),o(11,"section",7)(12,"div",8)(13,"h2",9),l(14,"Descubre un mundo visual"),a(),o(15,"p",10),l(16,"Explora fotograf\xEDas impactantes, conecta con otros fot\xF3grafos y construye tu galer\xEDa personal."),a(),o(17,"p",11),l(18,"Forma parte de una comunidad apasionada por contar historias a trav\xE9s del lente."),a(),o(19,"a",12),l(20,"Ver Fotos Recientes"),a()()(),o(21,"section",13)(22,"div",14)(23,"h2",15),l(24,"Fotos recientes"),a(),o(25,"div",16)(26,"div",17),_(27,Ke,3,3,"div",18),a(),o(28,"button",19),C(29,"span",20),a(),o(30,"button",21),C(31,"span",22),a()()()(),o(32,"section",23)(33,"div",14)(34,"h2",15),l(35,"Fotos m\xE1s valoradas"),a(),o(36,"div",24)(37,"div",17),_(38,Qe,3,3,"div",18),a(),o(39,"button",25),C(40,"span",20),a(),o(41,"button",26),C(42,"span",22),a()()()(),o(43,"section",27)(44,"div",14)(45,"h3",28),l(46,"\xBFListo para compartir tu visi\xF3n?"),a(),o(47,"p",11),l(48,"Reg\xEDstrate hoy y empieza a crear tu propio portafolio de fotograf\xEDas."),a(),o(49,"button",29),g("click",function(){return n.subirArriba()}),l(50,"\xDAnete ahora"),a()()()),e&2&&(s(27),d("ngForOf",n.fotosRecientesPorGrupo),s(11),d("ngForOf",n.fotosValoradasPorGrupo))},dependencies:[S,I],styles:[".hero-img[_ngcontent-%COMP%]{width:100%;height:680px;object-fit:cover;filter:brightness(.6)}.hero-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.text-shadow[_ngcontent-%COMP%]{text-shadow:0 2px 10px rgba(0,0,0,.7)}.carousel-img[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover;transition:transform .3s ease-in-out}.carousel-img[_ngcontent-%COMP%]:hover{transform:scale(1.05);cursor:pointer}.intro-section[_ngcontent-%COMP%]{background:#000}"]})};var Xe=()=>({transition:"transform 0.3s ease-in-out"}),Ye=i=>["/foto",i];function $e(i,t){if(i&1&&(o(0,"option",13),l(1),a()),i&2){let e=t.$implicit;d("value",e.id_categoria),s(),M(" ",e.nombre_categoria," ")}}function et(i,t){i&1&&(o(0,"div",14),l(1," No hay fotos para mostrar. "),a())}function tt(i,t){if(i&1){let e=y();o(0,"button",21),g("click",function(){p(e);let r=m().$implicit,c=m();return u(r.descargable?c.descargar(r):c.comprar(r))}),C(1,"i",22),a()}if(i&2){let e=m().$implicit;d("ngClass",e.descargable?"btn-success":"btn-warning")("title",e.descargable?"Descargar gratis":"Foto de pago"),s(),d("ngClass",e.descargable?"bi-download":"bi-currency-euro")}}function it(i,t){if(i&1){let e=y();o(0,"div",15),g("mouseover",function(){let r=p(e).index,c=m();return u(c.hoveredIndex=r)})("mouseout",function(){p(e);let r=m();return u(r.hoveredIndex=null)}),o(1,"div",16)(2,"a",17)(3,"div",18),C(4,"img",19),a()(),_(5,tt,2,3,"button",20),a()()}if(i&2){let e=t.$implicit,n=t.index,r=m();s(),d("ngStyle",we(5,Xe)),s(),d("routerLink",ye(6,Ye,e.id_foto))("title",e.descargable?"Descargar gratis":"Foto de pago"),s(2),d("src",r.backendBaseUrl+e.url,N),s(),d("ngIf",r.hoveredIndex===n)}}var Q=class i{constructor(t){this.http=t}backendBaseUrl="https://enfoca2-backend.onrender.com";categorias=[];filtro={orden:"fecha",precio:"",categoria:""};fotos=[];hoveredIndex=null;ngOnInit(){this.cargarCategorias(),this.aplicarFiltros()}cargarCategorias(){this.http.get(`${this.backendBaseUrl}/api/categorias`).subscribe({next:t=>this.categorias=t,error:t=>console.error("Error al cargar categor\xEDas:",t)})}aplicarFiltros(){let t=new Ve;this.filtro.orden&&(t=t.set("orden",this.filtro.orden)),this.filtro.precio&&(t=t.set("precio",this.filtro.precio)),this.filtro.categoria&&(t=t.set("categoria",this.filtro.categoria)),this.http.get(`${this.backendBaseUrl}/api/fotos/filtrar`,{params:t}).subscribe({next:e=>this.fotos=e,error:e=>console.error("Error al cargar fotos:",e)})}descargar(t){console.log("Descargando:",t.titulo)}comprar(t){console.log("Foto de pago:",t.titulo,"Precio:",t.precio)}static \u0275fac=function(e){return new(e||i)(E(T))};static \u0275cmp=w({type:i,selectors:[["app-explorar"]],decls:23,vars:6,consts:[[1,"container","mt-4","mb-4"],["data-traducir","",1,"text-center","mb-4"],[1,"d-flex","flex-wrap","gap-3","justify-content-center","mb-4"],["data-traducir-placeholder","",1,"form-select","w-auto",3,"ngModelChange","change","ngModel"],["value","","data-traducir",""],[3,"value",4,"ngFor","ngForOf"],["value","fecha","data-traducir",""],["value","likes","data-traducir",""],["value","gratis","data-traducir",""],["value","pago","data-traducir",""],["class","alert alert-info text-center","data-traducir","",4,"ngIf"],[1,"row","row-cols-2","row-cols-md-3","row-cols-lg-4","g-3","justify-content-center"],["class","col",3,"mouseover","mouseout",4,"ngFor","ngForOf"],[3,"value"],["data-traducir","",1,"alert","alert-info","text-center"],[1,"col",3,"mouseover","mouseout"],[1,"position-relative",3,"ngStyle"],["data-traducir","",1,"text-decoration-none","d-block",3,"routerLink","title"],[1,"card","border-0","shadow-sm","rounded-4","overflow-hidden"],["alt","Foto",1,"w-100",2,"object-fit","cover","height","220px",3,"src"],["class","btn btn-sm position-absolute top-0 end-0 m-2 rounded-circle","data-traducir","",3,"ngClass","title","click",4,"ngIf"],["data-traducir","",1,"btn","btn-sm","position-absolute","top-0","end-0","m-2","rounded-circle",3,"click","ngClass","title"],[1,"bi",3,"ngClass"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"h2",1),l(2,"Explorar Fotos"),a(),o(3,"div",2)(4,"select",3),v("ngModelChange",function(c){return x(n.filtro.categoria,c)||(n.filtro.categoria=c),c}),g("change",function(){return n.aplicarFiltros()}),o(5,"option",4),l(6,"Todas las categor\xEDas"),a(),_(7,$e,2,2,"option",5),a(),o(8,"select",3),v("ngModelChange",function(c){return x(n.filtro.orden,c)||(n.filtro.orden=c),c}),g("change",function(){return n.aplicarFiltros()}),o(9,"option",6),l(10,"M\xE1s recientes"),a(),o(11,"option",7),l(12,"M\xE1s valoradas"),a()(),o(13,"select",3),v("ngModelChange",function(c){return x(n.filtro.precio,c)||(n.filtro.precio=c),c}),g("change",function(){return n.aplicarFiltros()}),o(14,"option",4),l(15,"Todas"),a(),o(16,"option",8),l(17,"Gratis"),a(),o(18,"option",9),l(19,"De pago"),a()()(),_(20,et,2,0,"div",10),o(21,"div",11),_(22,it,6,8,"div",12),a()()),e&2&&(s(4),b("ngModel",n.filtro.categoria),s(3),d("ngForOf",n.categorias),s(),b("ngModel",n.filtro.orden),s(5),b("ngModel",n.filtro.precio),s(7),d("ngIf",n.fotos.length===0),s(2),d("ngForOf",n.fotos))},dependencies:[F,G,q,z,V,H,S,Se,I,P,Me,B],encapsulation:2})};function ot(i,t){if(i&1&&(o(0,"option",16),l(1),a()),i&2){let e=t.$implicit;d("value",e.id_categoria),s(),M(" ",e.nombre_categoria," ")}}var X=class i{constructor(t){this.http=t}categorias=[];foto={titulo:"",id_categoria:"",localizacion_nombre:"",descargable:1,precio:0};archivo;apiUrl="https://enfoca2-backend.onrender.com/api";ngOnInit(){this.cargarCategorias()}cargarCategorias(){this.http.get(`${this.apiUrl}/categorias`).subscribe({next:t=>this.categorias=t,error:t=>console.error("Error al cargar categor\xEDas:",t)})}onDescargableChange(){this.foto.descargable==1&&(this.foto.precio=0)}onFileChange(t){t.target.files&&t.target.files.length>0&&(this.archivo=t.target.files[0])}onSubmit(){let t=localStorage.getItem("token");if(!t){alert("Usuario no autenticado");return}if(!this.archivo){alert("Debe seleccionar una imagen");return}let e=this.categorias.find(f=>f.id_categoria==this.foto.id_categoria),n=e?e.nombre_categoria:"",r=new FormData;r.append("titulo",this.foto.titulo),r.append("id_categoria",this.foto.id_categoria),r.append("nombre_categoria",n),r.append("localizacion_nombre",this.foto.localizacion_nombre),r.append("descargable",String(this.foto.descargable)),r.append("precio",String(this.foto.descargable==1?0:this.foto.precio)),r.append("archivo",this.archivo);let c=new Te({Authorization:`Bearer ${t}`});this.http.post(`${this.apiUrl}/fotos`,r,{headers:c}).subscribe({next:()=>{alert("Foto subida con \xE9xito"),this.resetFormulario()},error:f=>{console.error("Error al subir la foto:",f),alert("Error al subir la foto")}})}resetFormulario(){this.foto={titulo:"",id_categoria:"",localizacion_nombre:"",descargable:1,precio:0},this.archivo=void 0}static \u0275fac=function(e){return new(e||i)(E(T))};static \u0275cmp=w({type:i,selectors:[["app-crear"]],decls:38,vars:9,consts:[["formulario","ngForm"],[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6","bg-dark","text-white","p-4","rounded","shadow"],[1,"mb-4","text-center"],["enctype","multipart/form-data",3,"ngSubmit"],[1,"mb-3"],["for","titulo",1,"form-label"],["type","text","id","titulo","name","titulo","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","categoria",1,"form-label"],["id","categoria","name","categoria","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","localizacion",1,"form-label"],["type","text","id","localizacion","name","localizacion","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","descargable",1,"form-label"],["id","descargable","name","descargable","required","",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"value"],["for","precio",1,"form-label"],["type","number","id","precio","name","precio",1,"form-control",3,"ngModelChange","readonly","ngModel"],[1,"mb-4"],["for","archivo",1,"form-label"],["type","file","id","archivo","name","archivo","accept","image/*","required","",1,"form-control",3,"change"],["type","submit",1,"btn","btn-outline-light","w-100","rounded-pill"]],template:function(e,n){if(e&1){let r=y();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),l(4,"Subir nueva fotograf\xEDa"),a(),o(5,"form",5,0),g("ngSubmit",function(){return p(r),u(n.onSubmit())}),o(7,"div",6)(8,"label",7),l(9,"T\xEDtulo de la fotograf\xEDa"),a(),o(10,"input",8),v("ngModelChange",function(f){return p(r),x(n.foto.titulo,f)||(n.foto.titulo=f),u(f)}),a()(),o(11,"div",6)(12,"label",9),l(13,"Categor\xEDa"),a(),o(14,"select",10),v("ngModelChange",function(f){return p(r),x(n.foto.id_categoria,f)||(n.foto.id_categoria=f),u(f)}),_(15,ot,2,2,"option",11),a()(),o(16,"div",6)(17,"label",12),l(18,"Localizaci\xF3n"),a(),o(19,"input",13),v("ngModelChange",function(f){return p(r),x(n.foto.localizacion_nombre,f)||(n.foto.localizacion_nombre=f),u(f)}),a()(),o(20,"div",6)(21,"label",14),l(22,"\xBFEs gratuita?"),a(),o(23,"select",15),v("ngModelChange",function(f){return p(r),x(n.foto.descargable,f)||(n.foto.descargable=f),u(f)}),g("change",function(){return p(r),u(n.onDescargableChange())}),o(24,"option",16),l(25,"S\xED"),a(),o(26,"option",16),l(27,"No"),a()()(),o(28,"div",6)(29,"label",17),l(30,"Precio (\u20AC)"),a(),o(31,"input",18),v("ngModelChange",function(f){return p(r),x(n.foto.precio,f)||(n.foto.precio=f),u(f)}),a()(),o(32,"div",19)(33,"label",20),l(34,"Selecciona la fotograf\xEDa"),a(),o(35,"input",21),g("change",function(f){return p(r),u(n.onFileChange(f))}),a()(),o(36,"button",22),l(37," Subir Fotograf\xEDa "),a()()()()()}e&2&&(s(10),b("ngModel",n.foto.titulo),s(4),b("ngModel",n.foto.id_categoria),s(),d("ngForOf",n.categorias),s(4),b("ngModel",n.foto.localizacion_nombre),s(4),b("ngModel",n.foto.descargable),s(),d("value",1),s(2),d("value",0),s(5),d("readonly",n.foto.descargable==1),b("ngModel",n.foto.precio))},dependencies:[F,Re,G,q,L,U,z,V,Ae,Be,H,Ne,S,I],encapsulation:2})};function nt(i,t){if(i&1&&(o(0,"div",7),l(1),a()),i&2){let e=m();s(),R(e.mensaje)}}function rt(i,t){i&1&&(o(0,"div",8)(1,"div",9)(2,"span",10),l(3,"Cargando..."),a()()())}function at(i,t){if(i&1){let e=y();o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),me(5,"date"),a(),o(6,"td"),l(7),me(8,"currency"),a(),o(9,"td")(10,"button",14),g("click",function(){let r=p(e).$implicit,c=m(2);return u(c.abrirEditar(r))}),l(11,"Editar"),a(),o(12,"button",15),g("click",function(){let r=p(e).$implicit,c=m(2);return u(c.eliminarFoto(r))}),l(13,"Eliminar"),a()()()}if(i&2){let e=t.$implicit;s(2),R(e.titulo),s(2),R(pe(5,3,e.fecha,"shortDate")),s(3),R(pe(8,6,e.precio,"EUR"))}}function lt(i,t){if(i&1&&(o(0,"table",11)(1,"thead",12)(2,"tr")(3,"th"),l(4,"T\xEDtulo"),a(),o(5,"th"),l(6,"Fecha"),a(),o(7,"th"),l(8,"Precio"),a(),o(9,"th"),l(10,"Acciones"),a()()(),o(11,"tbody"),_(12,at,14,9,"tr",13),a()()),i&2){let e=m();s(12),d("ngForOf",e.fotos)}}function st(i,t){i&1&&(o(0,"div",16),l(1,"No tienes fotos subidas."),a())}function ct(i,t){if(i&1){let e=y();o(0,"div",17)(1,"div",18)(2,"button",19),g("click",function(){p(e);let r=m();return u(r.cerrarModal())}),a(),o(3,"h5",20),l(4,"Editar Foto"),a(),o(5,"div",20)(6,"label",21),l(7,"T\xEDtulo:"),a(),o(8,"input",22),v("ngModelChange",function(r){p(e);let c=m();return x(c.fotoEditada.titulo,r)||(c.fotoEditada.titulo=r),u(r)}),a()(),o(9,"div",20)(10,"label",21),l(11,"Precio:"),a(),o(12,"input",23),v("ngModelChange",function(r){p(e);let c=m();return x(c.fotoEditada.precio,r)||(c.fotoEditada.precio=r),u(r)}),a()(),o(13,"div",24)(14,"button",25),g("click",function(){p(e);let r=m();return u(r.guardarCambios())}),l(15,"Guardar"),a(),o(16,"button",26),g("click",function(){p(e);let r=m();return u(r.cerrarModal())}),l(17,"Cancelar"),a()()()()}if(i&2){let e=m();s(8),b("ngModel",e.fotoEditada.titulo),s(4),b("ngModel",e.fotoEditada.precio)}}var Y=class i{constructor(t){this.fotoService=t}fotos=[];fotoEditada=null;mensaje="";cargando=!1;ngOnInit(){this.cargarFotosUsuario()}cargarFotosUsuario(){this.cargando=!0,this.fotoService.obtenerFotosUsuario().subscribe({next:t=>{this.fotos=t,this.cargando=!1},error:t=>{console.error(t),this.mensaje="Error al cargar fotos",this.cargando=!1}})}eliminarFoto(t){this.fotoService.eliminarFoto(t.id_foto).subscribe({next:()=>{this.mensaje=`Foto "${t.titulo}" eliminada`,this.fotos=this.fotos.filter(e=>e.id_foto!==t.id_foto),this.fotoEditada?.id_foto===t.id_foto&&(this.fotoEditada=null)},error:()=>{this.mensaje="Error al eliminar la foto"}})}abrirEditar(t){this.fotoEditada=he({},t)}cerrarModal(){this.fotoEditada=null}guardarCambios(){this.fotoEditada&&this.fotoService.editarFoto(this.fotoEditada.id_foto,this.fotoEditada).subscribe({next:()=>{this.mensaje=`Foto "${this.fotoEditada?.titulo}" actualizada`,this.cargarFotosUsuario(),this.cerrarModal()},error:()=>{this.mensaje="Error al actualizar la foto"}})}static \u0275fac=function(e){return new(e||i)(E(J))};static \u0275cmp=w({type:i,selectors:[["app-mis-fotos"]],decls:8,vars:5,consts:[[1,"container","mt-4"],[1,"mb-4","text-center"],["class","alert alert-info text-center rounded-3 shadow-sm",4,"ngIf"],["class","text-center my-4",4,"ngIf"],["class","table table-striped table-bordered text-center align-middle rounded-4 overflow-hidden",4,"ngIf"],["class","alert alert-warning text-center rounded-3 shadow-sm",4,"ngIf"],["class","position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center bg-dark bg-opacity-75","style","z-index: 1050;",4,"ngIf"],[1,"alert","alert-info","text-center","rounded-3","shadow-sm"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table","table-striped","table-bordered","text-center","align-middle","rounded-4","overflow-hidden"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm","me-2",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"alert","alert-warning","text-center","rounded-3","shadow-sm"],[1,"position-fixed","top-0","start-0","w-100","h-100","d-flex","justify-content-center","align-items-center","bg-dark","bg-opacity-75",2,"z-index","1050"],[1,"bg-white","p-4","rounded","shadow","position-relative",2,"width","90%","max-width","400px"],["type","button","aria-label","Cerrar",1,"btn-close","position-absolute","top-0","end-0","m-2",3,"click"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2"],[1,"btn","btn-success","w-50",3,"click"],[1,"btn","btn-secondary","w-50",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"h2",1),l(2,"Mis Fotos"),a(),_(3,nt,2,1,"div",2)(4,rt,4,0,"div",3)(5,lt,13,1,"table",4)(6,st,2,0,"div",5)(7,ct,18,2,"div",6),a()),e&2&&(s(3),d("ngIf",n.mensaje),s(),d("ngIf",n.cargando),s(),d("ngIf",n.fotos.length>0),s(),d("ngIf",n.fotos.length===0&&!n.cargando),s(),d("ngIf",n.fotoEditada))},dependencies:[S,I,P,ke,Fe,F,L,U,V,We,H],encapsulation:2})};var Ue=[{path:"",component:K},{path:"crear",component:X},{path:"explorar",component:Q},{path:"mis-fotos",component:Y},{path:"foto/:id",loadComponent:()=>import("./chunk-SNCPOILH.js").then(i=>i.FotoDetalleComponent)},{path:"admin",loadChildren:()=>import("./chunk-ZJZTXCBN.js").then(i=>i.AdminModule)},{path:"**",redirectTo:""}];var $=class i{intercept(t,e){let n=localStorage.getItem("token");if(n){let r=t.clone({headers:t.headers.set("Authorization",`Bearer ${n}`)});return e.handle(r)}return e.handle(t)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=O({token:i,factory:i.\u0275fac})};var ze={providers:[Ee({eventCoalescing:!0}),Le(Ue),Ce(F,De),{provide:He,useClass:$,multi:!0}]};var D=class extends Error{};D.prototype.name="InvalidTokenError";function dt(i){return decodeURIComponent(atob(i).replace(/(.)/g,(t,e)=>{let n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function mt(i){let t=i.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return dt(t)}catch{return atob(t)}}function Ge(i,t){if(typeof i!="string")throw new D("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,n=i.split(".")[e];if(typeof n!="string")throw new D(`Invalid token specified: missing part #${e+1}`);let r;try{r=mt(n)}catch(c){throw new D(`Invalid token specified: invalid base64 for part #${e+1} (${c.message})`)}try{return JSON.parse(r)}catch(c){throw new D(`Invalid token specified: invalid json for part #${e+1} (${c.message})`)}}var ee=class i{constructor(t){this.http=t;this.cargarSesion()}apiUrl="https://enfoca2-backend.onrender.com/api/auth";usuario=null;login(t){return this.http.post(`${this.apiUrl}/login`,t).pipe(ve(e=>{localStorage.setItem("token",e.token),this.usuario=this.decodificarToken(e.token)}))}register(t){return this.http.post(`${this.apiUrl}/register`,t)}logout(){this.usuario=null,localStorage.removeItem("token")}cargarSesion(){let t=localStorage.getItem("token");if(t){let e=this.decodificarToken(t),n=Math.floor(Date.now()/1e3);e.exp>n?this.usuario=e:this.logout()}}decodificarToken(t){return Ge(t)}estaAutenticado(){return!!this.usuario}esAdmin(){return this.usuario?.rol==="admin"}obtenerNombre(){return this.usuario?.nombre||""}static \u0275fac=function(e){return new(e||i)(W(T))};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})};var te=class i{constructor(t){this.http=t}apiKey="AIzaSyB7-MirTHhyLWsrlNhWn8nDLBwIhLf07Jo";url=`https://translation.googleapis.com/language/translate/v2?key=${this.apiKey}`;originales=new Map;traducirTexto(t,e,n){if(!e)throw new Error('El campo "target" es obligatorio para la traducci\xF3n.');let r={q:t,target:e,format:"text"};return n&&(r.source=n),this.http.post(this.url,r).pipe(xe(c=>(console.error("Error en traducci\xF3n:",c),be(()=>c))))}traducirPagina(t,e){return A(this,null,function*(){let r=Array.from(document.querySelectorAll("[data-traducir]")).filter(h=>!h.hasAttribute("data-no-traducir"));if(e==="es"){r.forEach(h=>{let re=this.originales.get(h);re&&(h.textContent=re)});return}r.forEach(h=>{this.originales.has(h)||this.originales.set(h,h.textContent||"")});let f=r.map(h=>h.textContent?.trim()||"").filter(h=>h.length>0);if(f.length!==0)try{let h=yield this.traducirTexto(f,e,t).toPromise();h&&h.data&&h.data.translations&&h.data.translations.map(ae=>ae.translatedText).forEach((ae,_e)=>{r[_e]&&(r[_e].textContent=ae)})}catch(h){console.error("Error traduciendo p\xE1gina:",h)}})}static \u0275fac=function(e){return new(e||i)(W(T))};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})};function gt(i,t){i&1&&(o(0,"li",12)(1,"a",13),l(2,"Explorar"),a()())}function ft(i,t){i&1&&(o(0,"li",12)(1,"a",14),l(2,"Crear"),a()())}function _t(i,t){i&1&&(o(0,"li",12)(1,"a",15),l(2,"Admin"),a()())}function ht(i,t){i&1&&(o(0,"li",12)(1,"a",16),l(2," Mis Fotos "),a()())}function bt(i,t){i&1&&(o(0,"li",12)(1,"a",13),l(2,"Explorar"),a()())}function xt(i,t){i&1&&(o(0,"li",12)(1,"a",14),l(2,"Crear"),a()())}function vt(i,t){i&1&&(o(0,"li",12)(1,"a",16),l(2," Mis Fotos "),a()())}function Ct(i,t){i&1&&(o(0,"li",12)(1,"a",15),l(2,"Admin"),a()())}function wt(i,t){if(i&1&&(se(0),o(1,"div",8)(2,"ul",9),_(3,gt,3,0,"li",10)(4,ft,3,0,"li",10)(5,_t,3,0,"li",10)(6,ht,3,0,"li",10),a()(),o(7,"div",11)(8,"ul",9),_(9,bt,3,0,"li",10)(10,xt,3,0,"li",10)(11,vt,3,0,"li",10)(12,Ct,3,0,"li",10),a()(),ce()),i&2){let e=m();s(3),d("ngIf",!e.auth.esAdmin()),s(),d("ngIf",!e.auth.esAdmin()),s(),d("ngIf",e.auth.esAdmin()),s(),d("ngIf",!e.auth.esAdmin()),s(3),d("ngIf",!e.auth.esAdmin()),s(),d("ngIf",!e.auth.esAdmin()),s(),d("ngIf",!e.auth.esAdmin()),s(),d("ngIf",e.auth.esAdmin())}}function yt(i,t){}function Et(i,t){if(i&1){let e=y();se(0),o(1,"div",17)(2,"span",18),l(3),a(),o(4,"button",19),g("click",function(){p(e);let r=m();return u(r.logout())}),l(5," Cerrar sesi\xF3n "),a(),o(6,"button",20),g("click",function(){p(e);let r=m();return u(r.toggleIdioma())}),l(7),a()(),o(8,"div",21)(9,"button",22),g("click",function(){p(e);let r=m();return u(r.toggleIdioma())}),l(10),a(),o(11,"button",23),g("click",function(){p(e);let r=m();return u(r.logout())}),l(12," Cerrar sesi\xF3n "),a()(),ce()}if(i&2){let e=m();s(3),M("Hola, ",e.auth.obtenerNombre(),""),s(4),M(" \u{1F310} ",e.idiomaActual.toUpperCase()," "),s(3),M(" \u{1F310} ",e.idiomaActual.toUpperCase()," ")}}function St(i,t){if(i&1){let e=y();o(0,"button",24),g("click",function(){p(e);let r=m();return u(r.toggleLogin())}),l(1," Login "),a(),o(2,"button",25),g("click",function(){p(e);let r=m();return u(r.toggleRegistro())}),l(3," Registro "),a(),o(4,"button",26),g("click",function(){p(e);let r=m();return u(r.toggleIdioma())}),l(5),a()}if(i&2){let e=m();s(5),M(" \u{1F310} ",e.idiomaActual.toUpperCase()," ")}}function Mt(i,t){if(i&1&&(o(0,"div",36),l(1),a()),i&2){let e=m(3);s(),M(" ",e.mensajeLogin," ")}}function Ft(i,t){if(i&1){let e=y();o(0,"div")(1,"h5",31),l(2,"Iniciar sesi\xF3n"),a(),_(3,Mt,2,1,"div",32),o(4,"input",33),v("ngModelChange",function(r){p(e);let c=m(2);return x(c.credenciales.email,r)||(c.credenciales.email=r),u(r)}),a(),o(5,"input",34),v("ngModelChange",function(r){p(e);let c=m(2);return x(c.credenciales.password,r)||(c.credenciales.password=r),u(r)}),a(),o(6,"button",35),g("click",function(){p(e);let r=m(2);return u(r.onLogin())}),l(7," Entrar "),a()()}if(i&2){let e=m(2);s(3),d("ngIf",e.mensajeLogin),s(),b("ngModel",e.credenciales.email),s(),b("ngModel",e.credenciales.password)}}function kt(i,t){if(i&1){let e=y();o(0,"div")(1,"h5",31),l(2,"Registro"),a(),o(3,"input",37),v("ngModelChange",function(r){p(e);let c=m(2);return x(c.usuario.nombre,r)||(c.usuario.nombre=r),u(r)}),a(),o(4,"input",33),v("ngModelChange",function(r){p(e);let c=m(2);return x(c.usuario.email,r)||(c.usuario.email=r),u(r)}),a(),o(5,"input",34),v("ngModelChange",function(r){p(e);let c=m(2);return x(c.usuario.password,r)||(c.usuario.password=r),u(r)}),a(),o(6,"button",35),g("click",function(){p(e);let r=m(2);return u(r.onRegister())}),l(7," Crear cuenta "),a()()}if(i&2){let e=m(2);s(3),b("ngModel",e.usuario.nombre),s(),b("ngModel",e.usuario.email),s(),b("ngModel",e.usuario.password)}}function It(i,t){if(i&1){let e=y();o(0,"div",27),g("click",function(r){p(e);let c=m();return u(c.cerrarForm(r))}),o(1,"div",28),g("click",function(r){return p(e),u(r.stopPropagation())}),o(2,"button",29),g("click",function(r){p(e);let c=m();return u(c.cerrarForm(r))}),a(),_(3,Ft,8,3,"div",30)(4,kt,8,3,"div",30),a()()}if(i&2){let e=m();s(3),d("ngIf",e.mostrarLogin),s(),d("ngIf",e.mostrarRegistro)}}var ie=class i{constructor(t,e,n){this.auth=t;this.router=e;this.translateService=n}exitoLogin=!1;exitoRegistro=!1;credenciales={email:"",password:""};usuario={nombre:"",email:"",password:""};mensajeLogin="";mensajeRegistro="";mostrarLogin=!1;mostrarRegistro=!1;idiomaActual="es";cerrarForm(t){this.mostrarLogin=!1,this.mostrarRegistro=!1}toggleLogin(){this.mostrarLogin=!this.mostrarLogin,this.mostrarLogin&&(this.mostrarRegistro=!1)}toggleRegistro(){this.mostrarRegistro=!this.mostrarRegistro,this.mostrarRegistro&&(this.mostrarLogin=!1)}onLogin(){this.auth.login(this.credenciales).subscribe({next:()=>{this.exitoLogin=!0,this.mensajeLogin="",this.mostrarLogin=!1},error:t=>{this.exitoLogin=!1,this.mensajeLogin=t.error?.error||"Error al iniciar sesi\xF3n"}})}onRegister(){this.auth.register(this.usuario).subscribe({next:()=>{this.exitoRegistro=!0,this.mensajeRegistro="",this.mostrarRegistro=!1},error:t=>{this.exitoRegistro=!1,this.mensajeRegistro=t.error?.error||"Error en el registro"}})}logout(){this.auth.logout(),this.router.navigate(["/home"])}ngOnInit(){return A(this,null,function*(){let t=localStorage.getItem("lang");if(t==="es"||t==="en"){this.idiomaActual=t;let e=t==="es"?"en":"es";try{yield this.translateService.traducirPagina(e,t)}catch(n){console.error("Error al traducir al iniciar:",n)}}})}toggleIdioma(){return A(this,null,function*(){let t=this.idiomaActual==="es"?"en":"es";this.idiomaActual=t,localStorage.setItem("lang",t);try{yield this.translateService.traducirPagina(t==="es"?"en":"es",t)}catch(e){console.error("Error al cambiar idioma:",e)}})}static \u0275fac=function(e){return new(e||i)(E(ee),E(Pe),E(te))};static \u0275cmp=w({type:i,selectors:[["app-header"]],decls:12,vars:5,consts:[["noLogeado",""],["botonesNoLogueado",""],[1,"navbar","navbar-dark","px-4","p-3","fw-bold",2,"background-color","#212529","position","relative","z-index","10"],[1,"container-fluid","d-flex","align-items-center","justify-content-between"],["routerLink","/home","data-traducir","","data-no-traducir","",1,"navbar-brand","fs-2","d-none","d-lg-block"],[4,"ngIf","ngIfElse"],[1,"d-flex","align-items-center","ms-auto"],["class","position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center bg-dark bg-opacity-75","style","z-index: 1050",3,"click",4,"ngIf"],[1,"d-none","d-lg-flex","flex-grow-1","justify-content-center"],[1,"navbar-nav","flex-row","mb-0"],["class","nav-item me-3",4,"ngIf"],[1,"d-flex","d-lg-none","flex-grow-1"],[1,"nav-item","me-3"],["routerLink","/explorar","data-traducir","",1,"nav-link","text-white"],["routerLink","/crear","data-traducir","",1,"nav-link","text-white"],["routerLink","/admin","data-traducir","",1,"nav-link","text-warning"],["routerLink","/mis-fotos","data-traducir","",1,"nav-link","text-white"],[1,"d-none","d-lg-flex","align-items-center"],["data-traducir","",1,"text-white","me-3"],["data-traducir","",1,"btn","btn-outline-light","btn-sm","me-3",3,"click"],["title","Cambiar idioma","data-no-traducir","",1,"btn","btn-outline-info","btn-sm","rounded-pill",3,"click"],[1,"d-flex","d-lg-none","align-items-center"],["title","Cambiar idioma","data-no-traducir","",1,"btn","btn-outline-info","btn-sm","me-3","rounded-pill",3,"click"],["data-traducir","",1,"btn","btn-outline-light","btn-sm",3,"click"],["data-traducir","",1,"btn","btn-outline-light","btn-sm","me-2","rounded-pill",3,"click"],["data-traducir","",1,"btn","btn-outline-light","btn-sm","rounded-pill",3,"click"],["title","Cambiar idioma","data-no-traducir","",1,"btn","btn-outline-info","btn-sm","ms-3","rounded-pill",3,"click"],[1,"position-fixed","top-0","start-0","w-100","h-100","d-flex","justify-content-center","align-items-center","bg-dark","bg-opacity-75",2,"z-index","1050",3,"click"],[1,"form-box","bg-dark","text-white","p-4","rounded","shadow","position-relative",2,"width","90%","max-width","400px",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close","btn-close-white","position-absolute","top-0","end-0","m-2",3,"click"],[4,"ngIf"],["data-traducir","",1,"text-light","mb-3"],["class","alert alert-danger p-2","role","alert",4,"ngIf"],["type","email","placeholder","Email","data-traducir-placeholder","",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["type","password","placeholder","Contrase\xF1a","data-traducir-placeholder","",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["data-traducir","",1,"btn","btn-primary","btn-sm","w-100",3,"click"],["role","alert",1,"alert","alert-danger","p-2"],["type","text","placeholder","Nombre","data-traducir-placeholder","",1,"form-control","mb-2",3,"ngModelChange","ngModel"]],template:function(e,n){if(e&1&&(o(0,"nav",2)(1,"div",3)(2,"a",4),l(3,"Enfoca2"),a(),_(4,wt,13,8,"ng-container",5)(5,yt,0,0,"ng-template",null,0,ue),o(7,"div",6),_(8,Et,13,3,"ng-container",5)(9,St,6,1,"ng-template",null,1,ue),a()()(),_(11,It,5,2,"div",7)),e&2){let r=de(6),c=de(10);s(4),d("ngIf",n.auth.estaAutenticado())("ngIfElse",r),s(4),d("ngIf",n.auth.estaAutenticado())("ngIfElse",c),s(3),d("ngIf",n.mostrarLogin||n.mostrarRegistro)}},dependencies:[F,L,V,H,S,P,B],styles:[".form-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.form-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.5rem}nav.navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:10}body[_ngcontent-%COMP%]{padding-top:60px}"]})};var oe=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"bg-dark","text-white","py-4","mt-auto","shadow-sm"],[1,"container","d-flex","flex-column","flex-md-row","justify-content-between","align-items-center","gap-3"],[1,"mb-0","text-center","text-md-start"],["href","https://www.instagram.com/juliobbernabeu/","target","_blank",1,"text-white","fs-4"],[1,"bi","bi-instagram"]],template:function(e,n){e&1&&(o(0,"footer",0)(1,"div",1)(2,"p",2),l(3,"\xA9 2025 Enfoca2 \xB7 Desarrollado por Julio Bernab\xE9u Blanco"),a(),o(4,"a",3),C(5,"i",4),a()()())},encapsulation:2})};var ne=class i{title="enfoca2-frontend";static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"flex-fill"]],template:function(e,n){e&1&&(C(0,"app-header"),o(1,"main",0),C(2,"router-outlet"),a(),C(3,"app-footer"))},dependencies:[Oe,ie,S,je,oe],encapsulation:2})};Ie(ne,ze).catch(i=>console.error(i));
