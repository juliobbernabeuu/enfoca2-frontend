import{a as J}from"./chunk-LH4K7IS7.js";import{A as m,B as me,C as l,D as W,E as M,F as b,G as x,H as C,I as ye,J as Ee,K as pe,L as ue,M as ge,N as Se,O as Me,P as I,Q as O,R as Fe,S as ke,T as Ie,U as S,V as Te,W as Ve,X as He,Y as T,Z as De,_ as Ae,a as be,aa as Le,b as N,ba as Oe,c as xe,ca as P,d as Ce,da as Pe,e as ve,ea as je,f as L,fa as j,ga as V,h as B,ha as Ne,i as we,ia as Re,j as p,ja as H,k as u,ka as We,l as R,la as U,m as s,ma as z,n as E,na as G,o as w,oa as q,pa as Be,q as _,qa as Ue,r as d,ra as F,s as se,t as o,u as n,v,w as ce,x as de,y,z as g}from"./chunk-Y2HWLAXH.js";function Ke(i,t){if(i&1&&v(0,"img",33),i&2){let e=t.$implicit,r=m(2);d("src",r.backendBaseUrl+e.url,R)("alt",e.titulo)}}function Ze(i,t){if(i&1&&(o(0,"div",30)(1,"div",31),_(2,Ke,1,2,"img",32),n()()),i&2){let e=t.$implicit,r=t.index;se("active",r===0),s(2),d("ngForOf",e)}}function Qe(i,t){if(i&1&&v(0,"img",33),i&2){let e=t.$implicit,r=m(2);d("src",r.backendBaseUrl+e.url,R)("alt",e.titulo)}}function Xe(i,t){if(i&1&&(o(0,"div",30)(1,"div",31),_(2,Qe,1,2,"img",32),n()()),i&2){let e=t.$implicit,r=t.index;se("active",r===0),s(2),d("ngForOf",e)}}var K=class i{constructor(t){this.fotoService=t}backendBaseUrl="https://enfoca2-backend.onrender.com";fotosRecientes=[];fotosValoradas=[];fotosRecientesPorGrupo=[];fotosValoradasPorGrupo=[];subirArriba(){window.scrollTo({top:0,behavior:"smooth"})}ngOnInit(){this.fotoService.obtenerTodas().subscribe(t=>{this.fotosRecientes=t.sort((e,r)=>new Date(r.fecha).getTime()-new Date(e.fecha).getTime()).slice(0,12),this.fotosRecientesPorGrupo=this.dividirEnGrupos(this.fotosRecientes,4)}),this.fotoService.obtenerValoradas().subscribe(t=>{this.fotosValoradas=t.slice(0,12),this.fotosValoradasPorGrupo=this.dividirEnGrupos(this.fotosValoradas,4)})}dividirEnGrupos(t,e){let r=[];for(let a=0;a<t.length;a+=e)r.push(t.slice(a,a+e));return r}static \u0275fac=function(e){return new(e||i)(E(J))};static \u0275cmp=w({type:i,selectors:[["app-home"]],decls:51,vars:2,consts:[[1,"position-relative","text-white"],["src","fondo.jpg","alt","Fondo",1,"w-100",2,"height","680px","object-fit","cover","filter","brightness(0.5)"],[1,"position-absolute","top-50","start-50","translate-middle","text-center","px-3"],["data-traducir","",1,"display-2","fw-bold"],["data-no-traducir",""],["data-traducir","",1,"lead","mt-3"],["href","#descubrir-mas","data-traducir","",1,"btn","btn-outline-light","btn-lg","mt-4","rounded-pill","px-4"],["id","descubrir-mas",1,"py-5","bg-dark","text-light"],[1,"container","text-center"],["data-traducir","",1,"mb-4","fw-semibold"],["data-traducir","",1,"fs-5","mb-3"],["data-traducir","",1,"mb-4"],["href","#carrusel-recientes","data-traducir","",1,"btn","btn-light","btn-lg","rounded-pill","px-4"],["id","carrusel-recientes",1,"py-5","bg-white"],[1,"container"],["data-traducir","",1,"text-center","mb-5"],["id","carouselRecientes","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselRecientes","data-bs-slide","prev",1,"carousel-control-prev"],[1,"carousel-control-prev-icon"],["type","button","data-bs-target","#carouselRecientes","data-bs-slide","next",1,"carousel-control-next"],[1,"carousel-control-next-icon"],[1,"py-5","bg-dark","text-light"],["id","carouselValoradas","data-bs-ride","carousel",1,"carousel","slide"],["type","button","data-bs-target","#carouselValoradas","data-bs-slide","prev",1,"carousel-control-prev"],["type","button","data-bs-target","#carouselValoradas","data-bs-slide","next",1,"carousel-control-next"],[1,"py-5","bg-white","text-center"],["data-traducir","",1,"fw-bold","mb-3"],["data-traducir","",1,"btn","btn-outline-dark","btn-lg","rounded-pill","px-4","me-3",3,"click"],[1,"carousel-item"],[1,"d-flex","justify-content-center","flex-wrap","gap-4"],["class","rounded shadow-sm","style","width: 300px; height: 200px; object-fit: cover;",3,"src","alt",4,"ngFor","ngForOf"],[1,"rounded","shadow-sm",2,"width","300px","height","200px","object-fit","cover",3,"src","alt"]],template:function(e,r){e&1&&(o(0,"div",0),v(1,"img",1),o(2,"div",2)(3,"h1",3),l(4,"Bienvenido a "),o(5,"span",4),l(6,"Enfoca2"),n()(),o(7,"p",5),l(8,"Captura, comparte y descubre las mejores fotograf\xEDas."),n(),o(9,"a",6),l(10,"Explorar"),n()()(),o(11,"section",7)(12,"div",8)(13,"h2",9),l(14,"Descubre un mundo visual"),n(),o(15,"p",10),l(16,"Explora fotograf\xEDas impactantes, conecta con otros fot\xF3grafos y construye tu galer\xEDa personal."),n(),o(17,"p",11),l(18,"Forma parte de una comunidad apasionada por contar historias a trav\xE9s del lente."),n(),o(19,"a",12),l(20,"Ver Fotos Recientes"),n()()(),o(21,"section",13)(22,"div",14)(23,"h2",15),l(24,"Fotos recientes"),n(),o(25,"div",16)(26,"div",17),_(27,Ze,3,3,"div",18),n(),o(28,"button",19),v(29,"span",20),n(),o(30,"button",21),v(31,"span",22),n()()()(),o(32,"section",23)(33,"div",14)(34,"h2",15),l(35,"Fotos m\xE1s valoradas"),n(),o(36,"div",24)(37,"div",17),_(38,Xe,3,3,"div",18),n(),o(39,"button",25),v(40,"span",20),n(),o(41,"button",26),v(42,"span",22),n()()()(),o(43,"section",27)(44,"div",14)(45,"h3",28),l(46,"\xBFListo para compartir tu visi\xF3n?"),n(),o(47,"p",11),l(48,"Reg\xEDstrate hoy y empieza a crear tu propio portafolio de fotograf\xEDas."),n(),o(49,"button",29),g("click",function(){return r.subirArriba()}),l(50,"\xDAnete ahora"),n()()()),e&2&&(s(27),d("ngForOf",r.fotosRecientesPorGrupo),s(11),d("ngForOf",r.fotosValoradasPorGrupo))},dependencies:[S,I],styles:[".hero-img[_ngcontent-%COMP%]{width:100%;height:680px;object-fit:cover;filter:brightness(.6)}.hero-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.text-shadow[_ngcontent-%COMP%]{text-shadow:0 2px 10px rgba(0,0,0,.7)}.carousel-img[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover;transition:transform .3s ease-in-out}.carousel-img[_ngcontent-%COMP%]:hover{transform:scale(1.05);cursor:pointer}.intro-section[_ngcontent-%COMP%]{background:#000}"]})};var Ye=()=>({transition:"transform 0.3s ease-in-out"}),$e=i=>["/foto",i];function et(i,t){if(i&1&&(o(0,"option",13),l(1),n()),i&2){let e=t.$implicit;d("value",e.id_categoria),s(),M(" ",e.nombre_categoria," ")}}function tt(i,t){i&1&&(o(0,"div",14),l(1," No hay fotos para mostrar. "),n())}function it(i,t){if(i&1){let e=y();o(0,"button",21),g("click",function(){p(e);let a=m().$implicit,c=m();return u(a.descargable?c.descargar(a):c.comprar(a))}),v(1,"i",22),n()}if(i&2){let e=m().$implicit;d("ngClass",e.descargable?"btn-success":"btn-warning")("title",e.descargable?"Descargar gratis":"Foto de pago"),s(),d("ngClass",e.descargable?"bi-download":"bi-currency-euro")}}function ot(i,t){if(i&1){let e=y();o(0,"div",15),g("mouseover",function(){let a=p(e).index,c=m();return u(c.hoveredIndex=a)})("mouseout",function(){p(e);let a=m();return u(a.hoveredIndex=null)}),o(1,"div",16)(2,"a",17)(3,"div",18),v(4,"img",19),n()(),_(5,it,2,3,"button",20),n()()}if(i&2){let e=t.$implicit,r=t.index,a=m();s(),d("ngStyle",ye(5,Ye)),s(),d("routerLink",Ee(6,$e,e.id_foto))("title",e.descargable?"Descargar gratis":"Foto de pago"),s(2),d("src",a.backendBaseUrl+e.url,R),s(),d("ngIf",a.hoveredIndex===r)}}var Q=class i{constructor(t){this.http=t}backendBaseUrl="https://enfoca2-backend.onrender.com";categorias=[];filtro={orden:"fecha",precio:"",categoria:""};fotos=[];hoveredIndex=null;ngOnInit(){this.cargarCategorias(),this.aplicarFiltros()}cargarCategorias(){this.http.get(`${this.backendBaseUrl}/api/categorias`).subscribe({next:t=>this.categorias=t,error:t=>console.error("Error al cargar categor\xEDas:",t)})}aplicarFiltros(){let t=new He;this.filtro.orden&&(t=t.set("orden",this.filtro.orden)),this.filtro.precio&&(t=t.set("precio",this.filtro.precio)),this.filtro.categoria&&(t=t.set("categoria",this.filtro.categoria)),this.http.get(`${this.backendBaseUrl}/api/fotos/filtrar`,{params:t}).subscribe({next:e=>this.fotos=e,error:e=>console.error("Error al cargar fotos:",e)})}descargar(t){console.log("Descargando:",t.titulo)}comprar(t){console.log("Foto de pago:",t.titulo,"Precio:",t.precio)}static \u0275fac=function(e){return new(e||i)(E(T))};static \u0275cmp=w({type:i,selectors:[["app-explorar"]],decls:23,vars:6,consts:[[1,"container","mt-4","mb-4"],["data-traducir","",1,"text-center","mb-4"],[1,"d-flex","flex-wrap","gap-3","justify-content-center","mb-4"],["data-traducir-placeholder","",1,"form-select","w-auto",3,"ngModelChange","change","ngModel"],["value","","data-traducir",""],[3,"value",4,"ngFor","ngForOf"],["value","fecha","data-traducir",""],["value","likes","data-traducir",""],["value","gratis","data-traducir",""],["value","pago","data-traducir",""],["class","alert alert-info text-center","data-traducir","",4,"ngIf"],[1,"row","row-cols-2","row-cols-md-3","row-cols-lg-4","g-3","justify-content-center"],["class","col",3,"mouseover","mouseout",4,"ngFor","ngForOf"],[3,"value"],["data-traducir","",1,"alert","alert-info","text-center"],[1,"col",3,"mouseover","mouseout"],[1,"position-relative",3,"ngStyle"],["data-traducir","",1,"text-decoration-none","d-block",3,"routerLink","title"],[1,"card","border-0","shadow-sm","rounded-4","overflow-hidden"],["alt","Foto",1,"w-100",2,"object-fit","cover","height","220px",3,"src"],["class","btn btn-sm position-absolute top-0 end-0 m-2 rounded-circle","data-traducir","",3,"ngClass","title","click",4,"ngIf"],["data-traducir","",1,"btn","btn-sm","position-absolute","top-0","end-0","m-2","rounded-circle",3,"click","ngClass","title"],[1,"bi",3,"ngClass"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"h2",1),l(2,"Explorar Fotos"),n(),o(3,"div",2)(4,"select",3),C("ngModelChange",function(c){return x(r.filtro.categoria,c)||(r.filtro.categoria=c),c}),g("change",function(){return r.aplicarFiltros()}),o(5,"option",4),l(6,"Todas las categor\xEDas"),n(),_(7,et,2,2,"option",5),n(),o(8,"select",3),C("ngModelChange",function(c){return x(r.filtro.orden,c)||(r.filtro.orden=c),c}),g("change",function(){return r.aplicarFiltros()}),o(9,"option",6),l(10,"M\xE1s recientes"),n(),o(11,"option",7),l(12,"M\xE1s valoradas"),n()(),o(13,"select",3),C("ngModelChange",function(c){return x(r.filtro.precio,c)||(r.filtro.precio=c),c}),g("change",function(){return r.aplicarFiltros()}),o(14,"option",4),l(15,"Todas"),n(),o(16,"option",8),l(17,"Gratis"),n(),o(18,"option",9),l(19,"De pago"),n()()(),_(20,tt,2,0,"div",10),o(21,"div",11),_(22,ot,6,8,"div",12),n()()),e&2&&(s(4),b("ngModel",r.filtro.categoria),s(3),d("ngForOf",r.categorias),s(),b("ngModel",r.filtro.orden),s(5),b("ngModel",r.filtro.precio),s(7),d("ngIf",r.fotos.length===0),s(2),d("ngForOf",r.fotos))},dependencies:[F,G,q,z,V,H,S,Me,I,O,Fe,P],encapsulation:2})};function nt(i,t){if(i&1&&(o(0,"option",16),l(1),n()),i&2){let e=t.$implicit;d("value",e.id_categoria),s(),M(" ",e.nombre_categoria," ")}}var X=class i{constructor(t){this.http=t}categorias=[];foto={titulo:"",id_categoria:"",localizacion_nombre:"",descargable:1,precio:0};archivo;apiUrl="https://enfoca2-backend.onrender.com/api";ngOnInit(){this.cargarCategorias()}cargarCategorias(){this.http.get(`${this.apiUrl}/categorias`).subscribe({next:t=>this.categorias=t,error:t=>console.error("Error al cargar categor\xEDas:",t)})}onDescargableChange(){this.foto.descargable==1&&(this.foto.precio=0)}onFileChange(t){t.target.files&&t.target.files.length>0&&(this.archivo=t.target.files[0])}onSubmit(){let t=localStorage.getItem("token");if(!t){alert("Usuario no autenticado");return}if(!this.archivo){alert("Debe seleccionar una imagen");return}let e=this.categorias.find(f=>f.id_categoria==this.foto.id_categoria),r=e?e.nombre_categoria:"",a=new FormData;a.append("titulo",this.foto.titulo),a.append("id_categoria",this.foto.id_categoria),a.append("nombre_categoria",r),a.append("localizacion_nombre",this.foto.localizacion_nombre),a.append("descargable",String(this.foto.descargable)),a.append("precio",String(this.foto.descargable==1?0:this.foto.precio)),a.append("archivo",this.archivo);let c=new Ve({Authorization:`Bearer ${t}`});this.http.post(`${this.apiUrl}/fotos`,a,{headers:c}).subscribe({next:()=>{alert("Foto subida con \xE9xito"),this.resetFormulario()},error:f=>{console.error("Error al subir la foto:",f),alert("Error al subir la foto")}})}resetFormulario(){this.foto={titulo:"",id_categoria:"",localizacion_nombre:"",descargable:1,precio:0},this.archivo=void 0}static \u0275fac=function(e){return new(e||i)(E(T))};static \u0275cmp=w({type:i,selectors:[["app-crear"]],decls:38,vars:9,consts:[["formulario","ngForm"],[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6","bg-dark","text-white","p-4","rounded","shadow"],[1,"mb-4","text-center"],["enctype","multipart/form-data",3,"ngSubmit"],[1,"mb-3"],["for","titulo",1,"form-label"],["type","text","id","titulo","name","titulo","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","categoria",1,"form-label"],["id","categoria","name","categoria","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","localizacion",1,"form-label"],["type","text","id","localizacion","name","localizacion","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","descargable",1,"form-label"],["id","descargable","name","descargable","required","",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"value"],["for","precio",1,"form-label"],["type","number","id","precio","name","precio",1,"form-control",3,"ngModelChange","readonly","ngModel"],[1,"mb-4"],["for","archivo",1,"form-label"],["type","file","id","archivo","name","archivo","accept","image/*","required","",1,"form-control",3,"change"],["type","submit",1,"btn","btn-outline-light","w-100","rounded-pill"]],template:function(e,r){if(e&1){let a=y();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),l(4,"Subir nueva fotograf\xEDa"),n(),o(5,"form",5,0),g("ngSubmit",function(){return p(a),u(r.onSubmit())}),o(7,"div",6)(8,"label",7),l(9,"T\xEDtulo de la fotograf\xEDa"),n(),o(10,"input",8),C("ngModelChange",function(f){return p(a),x(r.foto.titulo,f)||(r.foto.titulo=f),u(f)}),n()(),o(11,"div",6)(12,"label",9),l(13,"Categor\xEDa"),n(),o(14,"select",10),C("ngModelChange",function(f){return p(a),x(r.foto.id_categoria,f)||(r.foto.id_categoria=f),u(f)}),_(15,nt,2,2,"option",11),n()(),o(16,"div",6)(17,"label",12),l(18,"Localizaci\xF3n"),n(),o(19,"input",13),C("ngModelChange",function(f){return p(a),x(r.foto.localizacion_nombre,f)||(r.foto.localizacion_nombre=f),u(f)}),n()(),o(20,"div",6)(21,"label",14),l(22,"\xBFEs gratuita?"),n(),o(23,"select",15),C("ngModelChange",function(f){return p(a),x(r.foto.descargable,f)||(r.foto.descargable=f),u(f)}),g("change",function(){return p(a),u(r.onDescargableChange())}),o(24,"option",16),l(25,"S\xED"),n(),o(26,"option",16),l(27,"No"),n()()(),o(28,"div",6)(29,"label",17),l(30,"Precio (\u20AC)"),n(),o(31,"input",18),C("ngModelChange",function(f){return p(a),x(r.foto.precio,f)||(r.foto.precio=f),u(f)}),n()(),o(32,"div",19)(33,"label",20),l(34,"Selecciona la fotograf\xEDa"),n(),o(35,"input",21),g("change",function(f){return p(a),u(r.onFileChange(f))}),n()(),o(36,"button",22),l(37," Subir Fotograf\xEDa "),n()()()()()}e&2&&(s(10),b("ngModel",r.foto.titulo),s(4),b("ngModel",r.foto.id_categoria),s(),d("ngForOf",r.categorias),s(4),b("ngModel",r.foto.localizacion_nombre),s(4),b("ngModel",r.foto.descargable),s(),d("value",1),s(2),d("value",0),s(5),d("readonly",r.foto.descargable==1),b("ngModel",r.foto.precio))},dependencies:[F,We,G,q,j,U,z,V,Ne,Ue,H,Re,S,I],encapsulation:2})};function rt(i,t){if(i&1&&(o(0,"div",7),l(1),n()),i&2){let e=m();s(),W(e.mensaje)}}function at(i,t){i&1&&(o(0,"div",8)(1,"div",9)(2,"span",10),l(3,"Cargando..."),n()()())}function lt(i,t){if(i&1){let e=y();o(0,"tr")(1,"td"),l(2),n(),o(3,"td"),l(4),pe(5,"date"),n(),o(6,"td"),l(7),pe(8,"currency"),n(),o(9,"td")(10,"button",14),g("click",function(){let a=p(e).$implicit,c=m(2);return u(c.abrirEditar(a))}),l(11,"Editar"),n(),o(12,"button",15),g("click",function(){let a=p(e).$implicit,c=m(2);return u(c.eliminarFoto(a))}),l(13,"Eliminar"),n()()()}if(i&2){let e=t.$implicit;s(2),W(e.titulo),s(2),W(ue(5,3,e.fecha,"shortDate")),s(3),W(ue(8,6,e.precio,"EUR"))}}function st(i,t){if(i&1&&(o(0,"table",11)(1,"thead",12)(2,"tr")(3,"th"),l(4,"T\xEDtulo"),n(),o(5,"th"),l(6,"Fecha"),n(),o(7,"th"),l(8,"Precio"),n(),o(9,"th"),l(10,"Acciones"),n()()(),o(11,"tbody"),_(12,lt,14,9,"tr",13),n()()),i&2){let e=m();s(12),d("ngForOf",e.fotos)}}function ct(i,t){i&1&&(o(0,"div",16),l(1,"No tienes fotos subidas."),n())}function dt(i,t){if(i&1){let e=y();o(0,"div",17)(1,"div",18)(2,"button",19),g("click",function(){p(e);let a=m();return u(a.cerrarModal())}),n(),o(3,"h5",20),l(4,"Editar Foto"),n(),o(5,"div",20)(6,"label",21),l(7,"T\xEDtulo:"),n(),o(8,"input",22),C("ngModelChange",function(a){p(e);let c=m();return x(c.fotoEditada.titulo,a)||(c.fotoEditada.titulo=a),u(a)}),n()(),o(9,"div",20)(10,"label",21),l(11,"Precio:"),n(),o(12,"input",23),C("ngModelChange",function(a){p(e);let c=m();return x(c.fotoEditada.precio,a)||(c.fotoEditada.precio=a),u(a)}),n()(),o(13,"div",24)(14,"button",25),g("click",function(){p(e);let a=m();return u(a.guardarCambios())}),l(15,"Guardar"),n(),o(16,"button",26),g("click",function(){p(e);let a=m();return u(a.cerrarModal())}),l(17,"Cancelar"),n()()()()}if(i&2){let e=m();s(8),b("ngModel",e.fotoEditada.titulo),s(4),b("ngModel",e.fotoEditada.precio)}}var Y=class i{constructor(t){this.fotoService=t}fotos=[];fotoEditada=null;mensaje="";cargando=!1;ngOnInit(){this.cargarFotosUsuario()}cargarFotosUsuario(){this.cargando=!0,this.fotoService.obtenerFotosUsuario().subscribe({next:t=>{this.fotos=t,this.cargando=!1},error:t=>{console.error(t),this.mensaje="Error al cargar fotos",this.cargando=!1}})}eliminarFoto(t){this.fotoService.eliminarFoto(t.id_foto).subscribe({next:()=>{this.mensaje=`Foto "${t.titulo}" eliminada`,this.fotos=this.fotos.filter(e=>e.id_foto!==t.id_foto),this.fotoEditada?.id_foto===t.id_foto&&(this.fotoEditada=null)},error:()=>{this.mensaje="Error al eliminar la foto"}})}abrirEditar(t){this.fotoEditada=be({},t)}cerrarModal(){this.fotoEditada=null}guardarCambios(){this.fotoEditada&&this.fotoService.editarFoto(this.fotoEditada.id_foto,this.fotoEditada).subscribe({next:()=>{this.mensaje=`Foto "${this.fotoEditada?.titulo}" actualizada`,this.cargarFotosUsuario(),this.cerrarModal()},error:()=>{this.mensaje="Error al actualizar la foto"}})}static \u0275fac=function(e){return new(e||i)(E(J))};static \u0275cmp=w({type:i,selectors:[["app-mis-fotos"]],decls:8,vars:5,consts:[[1,"container","mt-4"],[1,"mb-4","text-center"],["class","alert alert-info text-center rounded-3 shadow-sm",4,"ngIf"],["class","text-center my-4",4,"ngIf"],["class","table table-striped table-bordered text-center align-middle rounded-4 overflow-hidden",4,"ngIf"],["class","alert alert-warning text-center rounded-3 shadow-sm",4,"ngIf"],["class","position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center bg-dark bg-opacity-75","style","z-index: 1050;",4,"ngIf"],[1,"alert","alert-info","text-center","rounded-3","shadow-sm"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table","table-striped","table-bordered","text-center","align-middle","rounded-4","overflow-hidden"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm","me-2",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"alert","alert-warning","text-center","rounded-3","shadow-sm"],[1,"position-fixed","top-0","start-0","w-100","h-100","d-flex","justify-content-center","align-items-center","bg-dark","bg-opacity-75",2,"z-index","1050"],[1,"bg-white","p-4","rounded","shadow","position-relative",2,"width","90%","max-width","400px"],["type","button","aria-label","Cerrar",1,"btn-close","position-absolute","top-0","end-0","m-2",3,"click"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2"],[1,"btn","btn-success","w-50",3,"click"],[1,"btn","btn-secondary","w-50",3,"click"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"h2",1),l(2,"Mis Fotos"),n(),_(3,rt,2,1,"div",2)(4,at,4,0,"div",3)(5,st,13,1,"table",4)(6,ct,2,0,"div",5)(7,dt,18,2,"div",6),n()),e&2&&(s(3),d("ngIf",r.mensaje),s(),d("ngIf",r.cargando),s(),d("ngIf",r.fotos.length>0),s(),d("ngIf",r.fotos.length===0&&!r.cargando),s(),d("ngIf",r.fotoEditada))},dependencies:[S,I,O,Ie,ke,F,j,U,V,Be,H],encapsulation:2})};var $=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-acerca-de"]],decls:15,vars:0,consts:[[1,"container","py-5"],[1,"mt-4","fs-5"],[1,"fs-5"],["href","mailto:juliobernabeublanco@gmail.com",1,"text-info"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"h2"),l(2,"Acerca de Enfoca2"),n(),o(3,"p",1),l(4," Este proyecto ha sido desarrollado por "),o(5,"strong"),l(6,"Julio Bernab\xE9u Blanco"),n(),l(7,", alumno del "),o(8,"strong"),l(9,"IES Trassierra"),n(),l(10,". "),n(),o(11,"p",2),l(12," Si necesitas soporte, tienes alguna sugerencia o deseas contactar, puedes escribirme a: "),o(13,"a",3),l(14,` juliobernabeublanco
`),n()()())},encapsulation:2})};var ze=[{path:"",component:K},{path:"crear",component:X},{path:"explorar",component:Q},{path:"mis-fotos",component:Y},{path:"acerca-de",component:$},{path:"foto/:id",loadComponent:()=>import("./chunk-SNCPOILH.js").then(i=>i.FotoDetalleComponent)},{path:"admin",loadChildren:()=>import("./chunk-ZJZTXCBN.js").then(i=>i.AdminModule)},{path:"**",redirectTo:""}];var ee=class i{intercept(t,e){let r=localStorage.getItem("token");if(r){let a=t.clone({headers:t.headers.set("Authorization",`Bearer ${r}`)});return e.handle(a)}return e.handle(t)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=L({token:i,factory:i.\u0275fac})};var Ge={providers:[Se({eventCoalescing:!0}),Pe(ze),we(F,Ae),{provide:De,useClass:ee,multi:!0}]};var A=class extends Error{};A.prototype.name="InvalidTokenError";function mt(i){return decodeURIComponent(atob(i).replace(/(.)/g,(t,e)=>{let r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function pt(i){let t=i.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return mt(t)}catch{return atob(t)}}function qe(i,t){if(typeof i!="string")throw new A("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,r=i.split(".")[e];if(typeof r!="string")throw new A(`Invalid token specified: missing part #${e+1}`);let a;try{a=pt(r)}catch(c){throw new A(`Invalid token specified: invalid base64 for part #${e+1} (${c.message})`)}try{return JSON.parse(a)}catch(c){throw new A(`Invalid token specified: invalid json for part #${e+1} (${c.message})`)}}var te=class i{constructor(t){this.http=t;this.cargarSesion()}apiUrl="https://enfoca2-backend.onrender.com/api/auth";usuario=null;login(t){return this.http.post(`${this.apiUrl}/login`,t).pipe(ve(e=>{localStorage.setItem("token",e.token),this.usuario=this.decodificarToken(e.token)}))}register(t){return this.http.post(`${this.apiUrl}/register`,t)}logout(){this.usuario=null,localStorage.removeItem("token")}cargarSesion(){let t=localStorage.getItem("token");if(t){let e=this.decodificarToken(t),r=Math.floor(Date.now()/1e3);e.exp>r?this.usuario=e:this.logout()}}decodificarToken(t){return qe(t)}estaAutenticado(){return!!this.usuario}esAdmin(){return this.usuario?.rol==="admin"}obtenerNombre(){return this.usuario?.nombre||""}static \u0275fac=function(e){return new(e||i)(B(T))};static \u0275prov=L({token:i,factory:i.\u0275fac,providedIn:"root"})};var ie=class i{constructor(t){this.http=t}apiKey="AIzaSyB7-MirTHhyLWsrlNhWn8nDLBwIhLf07Jo";url=`https://translation.googleapis.com/language/translate/v2?key=${this.apiKey}`;originales=new Map;traducirTexto(t,e,r){if(!e)throw new Error('El campo "target" es obligatorio para la traducci\xF3n.');let a={q:t,target:e,format:"text"};return r&&(a.source=r),this.http.post(this.url,a).pipe(Ce(c=>(console.error("Error en traducci\xF3n:",c),xe(()=>c))))}traducirPagina(t,e){return N(this,null,function*(){let a=Array.from(document.querySelectorAll("[data-traducir]")).filter(h=>!h.hasAttribute("data-no-traducir"));if(e==="es"){a.forEach(h=>{let ae=this.originales.get(h);ae&&(h.textContent=ae)});return}a.forEach(h=>{this.originales.has(h)||this.originales.set(h,h.textContent||"")});let f=a.map(h=>h.textContent?.trim()||"").filter(h=>h.length>0);if(f.length!==0)try{let h=yield this.traducirTexto(f,e,t).toPromise();h&&h.data&&h.data.translations&&h.data.translations.map(le=>le.translatedText).forEach((le,he)=>{a[he]&&(a[he].textContent=le)})}catch(h){console.error("Error traduciendo p\xE1gina:",h)}})}static \u0275fac=function(e){return new(e||i)(B(T))};static \u0275prov=L({token:i,factory:i.\u0275fac,providedIn:"root"})};function ft(i,t){i&1&&(o(0,"li",12)(1,"a",13),l(2,"Explorar"),n()())}function _t(i,t){i&1&&(o(0,"li",12)(1,"a",14),l(2,"Crear"),n()())}function ht(i,t){i&1&&(o(0,"li",12)(1,"a",15),l(2,"Admin"),n()())}function bt(i,t){i&1&&(o(0,"li",12)(1,"a",16),l(2," Mis Fotos "),n()())}function xt(i,t){i&1&&(o(0,"li",12)(1,"a",13),l(2,"Explorar"),n()())}function Ct(i,t){i&1&&(o(0,"li",12)(1,"a",14),l(2,"Crear"),n()())}function vt(i,t){i&1&&(o(0,"li",12)(1,"a",16),l(2," Mis Fotos "),n()())}function wt(i,t){i&1&&(o(0,"li",12)(1,"a",15),l(2,"Admin"),n()())}function yt(i,t){if(i&1&&(ce(0),o(1,"div",8)(2,"ul",9),_(3,ft,3,0,"li",10)(4,_t,3,0,"li",10)(5,ht,3,0,"li",10)(6,bt,3,0,"li",10),n()(),o(7,"div",11)(8,"ul",9),_(9,xt,3,0,"li",10)(10,Ct,3,0,"li",10)(11,vt,3,0,"li",10)(12,wt,3,0,"li",10),n()(),de()),i&2){let e=m();s(3),d("ngIf",!e.auth.esAdmin()),s(),d("ngIf",!e.auth.esAdmin()),s(),d("ngIf",e.auth.esAdmin()),s(),d("ngIf",!e.auth.esAdmin()),s(3),d("ngIf",!e.auth.esAdmin()),s(),d("ngIf",!e.auth.esAdmin()),s(),d("ngIf",!e.auth.esAdmin()),s(),d("ngIf",e.auth.esAdmin())}}function Et(i,t){}function St(i,t){if(i&1){let e=y();ce(0),o(1,"div",17)(2,"span",18),l(3),n(),o(4,"button",19),g("click",function(){p(e);let a=m();return u(a.logout())}),l(5," Cerrar sesi\xF3n "),n(),o(6,"button",20),g("click",function(){p(e);let a=m();return u(a.toggleIdioma())}),l(7),n()(),o(8,"div",21)(9,"button",22),g("click",function(){p(e);let a=m();return u(a.toggleIdioma())}),l(10),n(),o(11,"button",23),g("click",function(){p(e);let a=m();return u(a.logout())}),l(12," Cerrar sesi\xF3n "),n()(),de()}if(i&2){let e=m();s(3),M("Hola, ",e.auth.obtenerNombre(),""),s(4),M(" \u{1F310} ",e.idiomaActual.toUpperCase()," "),s(3),M(" \u{1F310} ",e.idiomaActual.toUpperCase()," ")}}function Mt(i,t){if(i&1){let e=y();o(0,"button",24),g("click",function(){p(e);let a=m();return u(a.toggleLogin())}),l(1," Login "),n(),o(2,"button",25),g("click",function(){p(e);let a=m();return u(a.toggleRegistro())}),l(3," Registro "),n(),o(4,"button",26),g("click",function(){p(e);let a=m();return u(a.toggleIdioma())}),l(5),n()}if(i&2){let e=m();s(5),M(" \u{1F310} ",e.idiomaActual.toUpperCase()," ")}}function Ft(i,t){if(i&1&&(o(0,"div",36),l(1),n()),i&2){let e=m(3);s(),M(" ",e.mensajeLogin," ")}}function kt(i,t){if(i&1){let e=y();o(0,"div")(1,"h5",31),l(2,"Iniciar sesi\xF3n"),n(),_(3,Ft,2,1,"div",32),o(4,"input",33),C("ngModelChange",function(a){p(e);let c=m(2);return x(c.credenciales.email,a)||(c.credenciales.email=a),u(a)}),n(),o(5,"input",34),C("ngModelChange",function(a){p(e);let c=m(2);return x(c.credenciales.password,a)||(c.credenciales.password=a),u(a)}),n(),o(6,"button",35),g("click",function(){p(e);let a=m(2);return u(a.onLogin())}),l(7," Entrar "),n()()}if(i&2){let e=m(2);s(3),d("ngIf",e.mensajeLogin),s(),b("ngModel",e.credenciales.email),s(),b("ngModel",e.credenciales.password)}}function It(i,t){if(i&1){let e=y();o(0,"div")(1,"h5",31),l(2,"Registro"),n(),o(3,"input",37),C("ngModelChange",function(a){p(e);let c=m(2);return x(c.usuario.nombre,a)||(c.usuario.nombre=a),u(a)}),n(),o(4,"input",33),C("ngModelChange",function(a){p(e);let c=m(2);return x(c.usuario.email,a)||(c.usuario.email=a),u(a)}),n(),o(5,"input",34),C("ngModelChange",function(a){p(e);let c=m(2);return x(c.usuario.password,a)||(c.usuario.password=a),u(a)}),n(),o(6,"button",35),g("click",function(){p(e);let a=m(2);return u(a.onRegister())}),l(7," Crear cuenta "),n()()}if(i&2){let e=m(2);s(3),b("ngModel",e.usuario.nombre),s(),b("ngModel",e.usuario.email),s(),b("ngModel",e.usuario.password)}}function Tt(i,t){if(i&1){let e=y();o(0,"div",27),g("click",function(a){p(e);let c=m();return u(c.cerrarForm(a))}),o(1,"div",28),g("click",function(a){return p(e),u(a.stopPropagation())}),o(2,"button",29),g("click",function(a){p(e);let c=m();return u(c.cerrarForm(a))}),n(),_(3,kt,8,3,"div",30)(4,It,8,3,"div",30),n()()}if(i&2){let e=m();s(3),d("ngIf",e.mostrarLogin),s(),d("ngIf",e.mostrarRegistro)}}var oe=class i{constructor(t,e,r){this.auth=t;this.router=e;this.translateService=r}exitoLogin=!1;exitoRegistro=!1;credenciales={email:"",password:""};usuario={nombre:"",email:"",password:""};mensajeLogin="";mensajeRegistro="";mostrarLogin=!1;mostrarRegistro=!1;idiomaActual="es";cerrarForm(t){this.mostrarLogin=!1,this.mostrarRegistro=!1}toggleLogin(){this.mostrarLogin=!this.mostrarLogin,this.mostrarLogin&&(this.mostrarRegistro=!1)}toggleRegistro(){this.mostrarRegistro=!this.mostrarRegistro,this.mostrarRegistro&&(this.mostrarLogin=!1)}onLogin(){this.auth.login(this.credenciales).subscribe({next:()=>{this.exitoLogin=!0,this.mensajeLogin="",this.mostrarLogin=!1},error:t=>{this.exitoLogin=!1,this.mensajeLogin=t.error?.error||"Error al iniciar sesi\xF3n"}})}onRegister(){this.auth.register(this.usuario).subscribe({next:()=>{this.exitoRegistro=!0,this.mensajeRegistro="",this.mostrarRegistro=!1},error:t=>{this.exitoRegistro=!1,this.mensajeRegistro=t.error?.error||"Error en el registro"}})}logout(){this.auth.logout(),this.router.navigate(["/home"])}ngOnInit(){return N(this,null,function*(){let t=localStorage.getItem("lang");if(t==="es"||t==="en"){this.idiomaActual=t;let e=t==="es"?"en":"es";try{yield this.translateService.traducirPagina(e,t)}catch(r){console.error("Error al traducir al iniciar:",r)}}})}toggleIdioma(){return N(this,null,function*(){let t=this.idiomaActual==="es"?"en":"es";this.idiomaActual=t,localStorage.setItem("lang",t);try{yield this.translateService.traducirPagina(t==="es"?"en":"es",t)}catch(e){console.error("Error al cambiar idioma:",e)}})}static \u0275fac=function(e){return new(e||i)(E(te),E(Oe),E(ie))};static \u0275cmp=w({type:i,selectors:[["app-header"]],decls:12,vars:5,consts:[["noLogeado",""],["botonesNoLogueado",""],[1,"navbar","navbar-dark","px-4","p-3","fw-bold",2,"background-color","#212529","position","relative","z-index","10"],[1,"container-fluid","d-flex","align-items-center","justify-content-between"],["routerLink","/home","data-traducir","","data-no-traducir","",1,"navbar-brand","fs-2","d-none","d-lg-block"],[4,"ngIf","ngIfElse"],[1,"d-flex","align-items-center","ms-auto"],["class","position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center bg-dark bg-opacity-75","style","z-index: 1050",3,"click",4,"ngIf"],[1,"d-none","d-lg-flex","flex-grow-1","justify-content-center"],[1,"navbar-nav","flex-row","mb-0"],["class","nav-item me-3",4,"ngIf"],[1,"d-flex","d-lg-none","flex-grow-1"],[1,"nav-item","me-3"],["routerLink","/explorar","data-traducir","",1,"nav-link","text-white"],["routerLink","/crear","data-traducir","",1,"nav-link","text-white"],["routerLink","/admin","data-traducir","",1,"nav-link","text-warning"],["routerLink","/mis-fotos","data-traducir","",1,"nav-link","text-white"],[1,"d-none","d-lg-flex","align-items-center"],["data-traducir","",1,"text-white","me-3"],["data-traducir","",1,"btn","btn-outline-light","btn-sm","me-3",3,"click"],["title","Cambiar idioma","data-no-traducir","",1,"btn","btn-outline-info","btn-sm","rounded-pill",3,"click"],[1,"d-flex","d-lg-none","align-items-center"],["title","Cambiar idioma","data-no-traducir","",1,"btn","btn-outline-info","btn-sm","me-3","rounded-pill",3,"click"],["data-traducir","",1,"btn","btn-outline-light","btn-sm",3,"click"],["data-traducir","",1,"btn","btn-outline-light","btn-sm","me-2","rounded-pill",3,"click"],["data-traducir","",1,"btn","btn-outline-light","btn-sm","rounded-pill",3,"click"],["title","Cambiar idioma","data-no-traducir","",1,"btn","btn-outline-info","btn-sm","ms-3","rounded-pill",3,"click"],[1,"position-fixed","top-0","start-0","w-100","h-100","d-flex","justify-content-center","align-items-center","bg-dark","bg-opacity-75",2,"z-index","1050",3,"click"],[1,"form-box","bg-dark","text-white","p-4","rounded","shadow","position-relative",2,"width","90%","max-width","400px",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close","btn-close-white","position-absolute","top-0","end-0","m-2",3,"click"],[4,"ngIf"],["data-traducir","",1,"text-light","mb-3"],["class","alert alert-danger p-2","role","alert",4,"ngIf"],["type","email","placeholder","Email","data-traducir-placeholder","",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["type","password","placeholder","Contrase\xF1a","data-traducir-placeholder","",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["data-traducir","",1,"btn","btn-primary","btn-sm","w-100",3,"click"],["role","alert",1,"alert","alert-danger","p-2"],["type","text","placeholder","Nombre","data-traducir-placeholder","",1,"form-control","mb-2",3,"ngModelChange","ngModel"]],template:function(e,r){if(e&1&&(o(0,"nav",2)(1,"div",3)(2,"a",4),l(3,"Enfoca2"),n(),_(4,yt,13,8,"ng-container",5)(5,Et,0,0,"ng-template",null,0,ge),o(7,"div",6),_(8,St,13,3,"ng-container",5)(9,Mt,6,1,"ng-template",null,1,ge),n()()(),_(11,Tt,5,2,"div",7)),e&2){let a=me(6),c=me(10);s(4),d("ngIf",r.auth.estaAutenticado())("ngIfElse",a),s(4),d("ngIf",r.auth.estaAutenticado())("ngIfElse",c),s(3),d("ngIf",r.mostrarLogin||r.mostrarRegistro)}},dependencies:[F,j,V,H,S,O,P],styles:[".form-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.form-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.5rem}nav.navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:10}body[_ngcontent-%COMP%]{padding-top:60px}"]})};var ne=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-footer"]],decls:8,vars:0,consts:[[1,"bg-dark","text-white","py-4","mt-auto","shadow-sm"],[1,"container","d-flex","flex-column","flex-md-row","justify-content-between","align-items-center","gap-3"],[1,"mb-0","text-center","text-md-start"],["routerLink","/acerca-de",1,"text-info","text-decoration-none"],["href","https://www.instagram.com/juliobbernabeu/","target","_blank",1,"text-white","fs-4"],[1,"bi","bi-instagram"]],template:function(e,r){e&1&&(o(0,"footer",0)(1,"div",1)(2,"p",2),l(3," \xA9 2025 Enfoca2 \xB7 "),o(4,"a",3),l(5," Acerca de "),n()(),o(6,"a",4),v(7,"i",5),n()()())},dependencies:[P],encapsulation:2})};var re=class i{title="enfoca2-frontend";static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"flex-fill"]],template:function(e,r){e&1&&(v(0,"app-header"),o(1,"main",0),v(2,"router-outlet"),n(),v(3,"app-footer"))},dependencies:[Le,oe,S,je,ne],encapsulation:2})};Te(re,Ge).catch(i=>console.error(i));
